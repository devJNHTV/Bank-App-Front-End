<div class="loan-detail-view-container">
  <div class="header">
    <div class="header-content">
      <h1>Pending Loan Applications</h1>
      <p class="subtitle">Review and process loan applications</p>
    </div>
    <p-button 
      icon="pi pi-refresh" 
      label="Refresh" 
      (onClick)="loadPendingLoans()"
      [loading]="loading"
      class="refresh-button">
    </p-button>
  </div>

  <div class="content-wrapper">
    <div class="loading-overlay" *ngIf="loading">
      <p-progressSpinner strokeWidth="6"></p-progressSpinner>
    </div>

    <div class="error-banner" *ngIf="error">
      <i class="pi pi-exclamation-triangle"></i>
      <span>{{ error }}</span>
    </div>

    <div class="no-data" *ngIf="!loading && pendingLoans.length === 0">
      <i class="pi pi-inbox"></i>
      <h3>No Pending Applications</h3>
      <p>There are currently no loan applications waiting for review.</p>
    </div>

    <p-table 
      *ngIf="!loading && pendingLoans.length > 0"
      [value]="pendingLoans"
      [paginator]="true"
      [rows]="10"
      [showCurrentPageReport]="true"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
      [rowsPerPageOptions]="[10,25,50]"
      styleClass="p-datatable-gridlines"
      [tableStyle]="{'min-width': '50rem'}"
      [globalFilterFields]="['loanId','accountNumber','amount','interestRate','termMonths','createdAt']">
      
      <ng-template pTemplate="caption">
        <div class="table-header">
          <h2>Loan Applications</h2>
          <span class="p-input-icon-left">
            <i class="pi pi-search"></i>
            <input 
              pInputText 
              type="text" 
              
              placeholder="Search..." />
              <!-- (input)="applyFilterGlobal($event, 'contains')"  -->
          </span>
        </div>
      </ng-template>

      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="loanId">ID <p-sortIcon field="loanId"></p-sortIcon></th>
          <th pSortableColumn="accountNumber">Account # <p-sortIcon field="accountNumber"></p-sortIcon></th>
          <th pSortableColumn="amount">Amount <p-sortIcon field="amount"></p-sortIcon></th>
          <th pSortableColumn="interestRate">Rate <p-sortIcon field="interestRate"></p-sortIcon></th>
          <th pSortableColumn="termMonths">Term <p-sortIcon field="termMonths"></p-sortIcon></th>
          <th pSortableColumn="createdAt">Created <p-sortIcon field="createdAt"></p-sortIcon></th>
          <th>Action</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-loan>
        <tr>
          <td>{{ loan.loanId }}</td>
          <td>{{ loan.accountNumber }}</td>
          <td>{{ formatCurrency(loan.amount) }}</td>
          <td>{{ loan.interestRate }}%</td>
          <td>{{ loan.termMonths }} months</td>
          <td>{{ formatDate(loan.createdAt) }}</td>
          <td>
            <p-button 
              icon="pi pi-eye" 
              label="View Details" 
              (onClick)="goToLoanDetail(loan.loanId!)"
              class="p-button-outlined">
            </p-button>
          </td>
        </tr>
      </ng-template>

      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="7" class="text-center">No pending loan applications found.</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
  